<!doctype html>
<html lang="no">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Dashboard – Prioriteringsspill</title>

  <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
  <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.1/dist/chart.umd.min.js"></script>
  <script src="config.js"></script>

  <style>
    :root { --bg:#f5f6f7; --card:#fff; --muted:#6b7280; }
    body { margin:0; font-family: system-ui,-apple-system,Segoe UI,Roboto,Arial; background:var(--bg); }
    header { background:#0f172a; color:#fff; padding:14px 18px; }
    header h1 { margin:0; font-size:18px; }
    main { padding:16px; }
    .row { display:flex; gap:16px; align-items:flex-start; }
    .col { flex:1; min-width:0; }
    .card { background:var(--card); border-radius:10px; padding:14px; box-shadow:0 6px 16px rgba(0,0,0,.08); }
    .muted { color:var(--muted); font-size:12px; }
    table { width:100%; border-collapse:collapse; }
    td,th { padding:8px; border-bottom:1px solid #e5e7eb; text-align:left; }
    th { font-size:12px; color:var(--muted); }
    pre { white-space:pre-wrap; font-size:12px; background:#f8fafc; padding:10px; border-radius:8px; }
    button { border:0; border-radius:8px; padding:8px 12px; cursor:pointer; background:#2563eb; color:#fff; }
  </style>
</head>
<body>
<header>
  <h1>Dashboard – Prioriteringsspill</h1>
</header>

<main>
  <section class="card">
    <div class="muted">
      Viser aggregert oversikt over innsendinger. Data kommer fra Supabase.
      (Dette er pilot: ingen innlogging.)
    </div>
  </section>

  <section class="row" style="margin-top:16px;">
    <div class="col card">
      <h2 style="margin:0 0 8px;">Top oppgaver (tid)</h2>
      <canvas id="chartTime"></canvas>
    </div>
    <div class="col card">
      <h2 style="margin:0 0 8px;">Top oppgaver (NOK)</h2>
      <canvas id="chartMoney"></canvas>
    </div>
  </section>

  <section class="row" style="margin-top:16px;">
    <div class="col card">
      <h2 style="margin:0 0 8px;">Innsendinger</h2>
      <div id="submissions"></div>
      <button id="exportCsv" style="margin-top:10px;">Eksporter aggregert CSV</button>
    </div>
    <div class="col card">
      <h2 style="margin:0 0 8px;">Valgt logg</h2>
      <pre id="logView">(velg en innsending)</pre>
    </div>
  </section>
</main>

<script src="dashboard.js"></script>
</body>
</html>
